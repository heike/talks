{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Basic Plots in ggplot2\"\nsubtitle: \"Midwest Big Data Summer School\"\nauthor: \"Heike Hofmann (hofmann@iastate.edu, @heike_hh), Taikgun Song\"\ndate: \"`r Sys.Date()`\"\noutput:\n  ioslides_presentation:\n    transition: default\n    widescreen: true\ncss:\n  styles.css\n---\n\n```{r, echo=FALSE}\nlibrary(ggplot2)\n```\n\n## Let's Run the Setup File...\n\nCopy and paste the code below into your console. Run the code in the file that opens.\n\n```{r, eval = FALSE}\ncurl::curl_download(\n  \"https://raw.githubusercontent.com/heike/summerschool-2017/master/02-graphics/code/0-Setup.R\",\n  \"0-Setup.R\"\n)\nfile.edit(\"0-Setup.R\")\n```\n\nYou should see a plot appear if setup is successful.\n\n\n## ggplot2 in a nutshell\n\n- Wildly popular package for statistical graphics: by now about 400k monthly downloads from CRAN ( more than 10k times per day)\n\n```{r, echo=FALSE}\nlibrary(\"dlstats\")\n\ndframe <- cran_stats(\"ggplot2\")\nggplot(data = dframe[-nrow(dframe),], aes(x = end, y = downloads)) + geom_point() + geom_line() +\n  ylab(\"Number of monthly downloads\") + xlab(\"Date\") +\n  ggtitle(\"Number of monthly downloads of ggplot2\")\n```\n\n## More on ggplot2\n\n- Developed by Hadley Wickham (An ISU Alumni)\n- Designed to adhere to good graphical practices\n- Supports a wide variety plot types\n- Constructs plots using the concept of layers\\medskip\n- http://ggplot2.org/book/ or Hadley's book *ggplot2: Elegant Graphics for Data Analysis* for reference material\n\n## *qplot* Function\n\nThe *qplot()* function is the basic workhorse of ggplot2\n\n- Produces all plot types available with ggplot2\n- Allows for plotting options within the function statement\n- Creates an object that can be saved\n- Plot layers can be added to modify plot complexity\n\n## *qplot* Structure\n\nThe *qplot()* function has a basic syntax:\n\n*qplot(variables, plot type, dataset, options)*\n\n- variables: list of variables used for the plot\n- plot type: specified with a *geom =* statement\n- dataset: specified with a *data =* statement\n- options: there are so, so many options!\n\n## Diamonds Data\n\nWe will explore the diamonds data set (preloaded along with ggplot2) using qplot for basic plotting.\n\nThe data set was scraped from a diamond exchange company data base by Hadley.  It contains the prices and attributes of over 50,000 diamonds\n\n## Examining the Diamonds Data\n\nWhat does the data look like?\n\nLets look at the top few rows of the diamond data frame to find out!\n\n```{r}\nhead(diamonds)\n```\n\n## Basic Scatterplot\n\nBasic scatter plot of diamond price vs carat weight\n\n```{r, fig.height=4, fig.width=7}\nqplot(carat, price, geom = \"point\", data = diamonds)\n```\n\n## Another Scatterplot\n\nScatter plot of diamond price vs carat weight showing versatility of options in qplot\n\n```{r, fig.height=3, fig.width=7}\nqplot(carat, log(price), geom = \"point\", data = diamonds, \n\talpha = I(0.2), colour = color, \n\tmain = \"Log price by carat weight, grouped by color\") + \n    xlab(\"Carat Weight\") + ylab(\"Log Price\")\n```\n\n## Your Turn {data-background=#527a7a}\n\nAll of the your turns for this section will use the tips data set:\n\n```{r}\ntips <- read.csv(\"https://raw.githubusercontent.com/heike/summerschool-2017/master/02-graphics/data/tips.csv\")\n```\n\n1. Use `qplot` to build a scatterplot of variables `tips` and `total_bill`\n2. Use options within `qplot` to color points by whether a person smokes\n3. Clean up axis labels and add main plot title\n\n## Basic Histogram\n\nBasic histogram of price\n\n```{r, fig.height=4, fig.width=7}\nqplot(price, geom = \"histogram\", data = diamonds)\n```\n\n## Why setting the bin width is useful\n\nHistogram of price, binwidth is set to $50 \n\n```{r, fig.height=4, fig.width=7}\nqplot(price, geom = \"histogram\",  binwidth = 50, data = diamonds)\n```\n\nThe gap in prices at around $2000 is due to the scraping procedure.\n\n## Another Histogram\n\nPrice histograms faceted by clarity\n\n```{r, fig.height=4, fig.width=7}\nqplot(price, geom = \"histogram\", data = diamonds, binwidth = 100, facets = .~clarity)\n```\n\n## Your Turn {data-background=#527a7a}\n\n1. Create a new variable in tips data frame rate = tip / total bill\n2. Use qplot to create a histogram of rate\n3. Change the bin width on that histogram to 0.05\n4. Facet this histogram by size of the group\n\n## Basic Boxplot\n\nSide by side boxplot of diamond prices within clarity groupings\n\n```{r, fig.height=4, fig.width=7}\nqplot(clarity, log(price), geom = \"boxplot\", data = diamonds)\n```\nWhy does price decrease as the quality of the diamonds increases?\n\n## Another Boxplot\n\nSide by side boxplot of log prices within clarity groupings with jittered values overlay\n\n```{r, fig.height=3, fig.width=7}\nqplot(clarity, log(price), geom = \"boxplot\", data = diamonds, \n\tmain = \"Boxplots of log Diamond Prices Grouped by Clarity\") +\n\tgeom_jitter(alpha = I(.025))\n```\nThere are two groups of prices ... maybe related to size?\n\n## Another Boxplot\n\nSide by side boxplot of log prices within clarity groupings \n\n```{r, fig.height=4, fig.width=7}\nqplot(clarity, log(price)/carat, geom = \"boxplot\", data = diamonds)\n```\n\n\n\n## Your Turn {data-background=#527a7a}\n\n1. Make side by side boxplots of tipping rate for males and females\n2. Overlay jittered points for observed values onto this boxplot\n\n## Bar Plots\n\nTo investigate bar plots we will switch over to the Titanic data set:\n\n```{r}\ntitanic <- as.data.frame(Titanic)\n```\n\nData includes passenger characteristics and survival outcomes for those aboard the RMS Titanic's ill fated maiden voyage\n\n## Basic Bar Plot\n\nBasic bar plot of survival outcomes\n\n```{r, fig.height=4, fig.width=7}\nqplot(Survived, geom = \"bar\", data = titanic, weight = Freq)\n```\n\n## Another Bar Plot\n\nBar plot faceted by gender and class\n\n```{r, fig.height=4, fig.width=7}\nqplot(Survived, geom = \"bar\", data = titanic, weight = Freq, \n      facets = Sex~Class)\n```\n\n## Your Turn {data-background=#527a7a}\n\n1. Use the tips data to make a barplot for counts of smoking and non smoking customers\n2. Facet using day of week and time of day to view how smoking status changes for different meal times\n",
    "created" : 1518372528404.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2774906230",
    "id" : "AA9D1335",
    "lastKnownWriteTime" : 1499709651,
    "last_content_update" : 1499709651,
    "path" : "~/Documents/Teaching/Midwest Big Data/summerschool-2017/02-graphics/knitr/1-GraphicsIntro.Rmd",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}